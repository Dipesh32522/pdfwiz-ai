<!DOCTYPE html> <html lang="hi"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title>FinanceTools Pro ‚Äî Calculators & GST Billing</title> <!-- External libs --> <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf.plugin.autotable.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script> <style> :root{ --bg:#0e1326;--surface:#0b1433;--card:#141c45;--text:#e9edf6;--muted:#aab1c7; --pri:#4fb4ff;--ok:#22c55e;--warn:#f59e0b;--bad:#ef4444;--br:#243463; } *{box-sizing:border-box} body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial;background:var(--bg);color:var(--text)} a{color:inherit;text-decoration:none} header{position:sticky;top:0;z-index:50;background:linear-gradient(90deg,#0f1a47,#0b2747);border-bottom:1px solid var(--br)} .header-inner{max-width:1200px;margin:auto;display:flex;gap:12px;align-items:center;justify-content:space-between;padding:14px} .brand{display:flex;gap:10px;align-items:center} .logo{width:36px;height:36px;border-radius:8px;background:linear-gradient(135deg,#5bd,#27a);display:flex;align-items:center;justify-content:center;font-weight:800} .nav a{padding:8px 10px;border-radius:8px} .nav a:hover{background:rgba(255,255,255,.08)} .theme{border:1px solid var(--br);background:transparent;color:var(--text);padding:8px 12px;border-radius:8px;cursor:pointer} footer{border-top:1px solid var(--br);background:#0b142f;color:var(--muted)} .footer-inner{max-width:1200px;margin:auto;padding:16px;display:flex;justify-content:space-between;flex-wrap:wrap;gap:12px} main{max-width:1200px;margin:0 auto;padding:20px 16px} /* Hero */ .hero{background:linear-gradient(135deg, rgba(79,180,255,.12), rgba(117,85,255,.08));border:1px solid var(--br);border-radius:16px;padding:24px;margin:16px 0} .hero h1{margin:0;font-size:28px} .hero p{margin:8px 0 0;color:var(--muted);max-width:900px} .cta{margin-top:14px;display:flex;gap:10px;flex-wrap:wrap} .btn{background:var(--pri);color:#06172a;border:none;padding:10px 14px;border-radius:10px;font-weight:700;cursor:pointer} .btn.ghost{background:transparent;border:1px solid var(--br);color:var(--text)} /* Cards grid */ .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px;margin-top:16px} .card{grid-column:span 6;background:var(--card);border:1px solid var(--br);border-radius:14px;padding:16px;transition:transform .15s} .card:hover{transform:translateY(-2px);outline:1px solid rgba(79,180,255,.35)} .card.small{grid-column:span 3} @media(max-width:900px){.card,.card.small{grid-column:span 12}} .card h3{margin:0 0 8px} .card p{margin:0;color:var(--muted)} .notice{padding:8px 10px;border-radius:8px;background:rgba(79,180,255,.12);border:1px solid var(--br);color:var(--muted);margin-top:8px} /* Tool layout */ .tool-header{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:10px} .back{border:1px solid var(--br);background:transparent;color:var(--text);padding:8px 10px;border-radius:8px;cursor:pointer} .badge{display:inline-block;border:1px solid var(--br);padding:2px 8px;border-radius:999px;color:var(--muted);font-size:12px} .inputs{display:grid;grid-template-columns:repeat(2,1fr);gap:10px} @media(max-width:700px){.inputs{grid-template-columns:1fr}} .input{display:flex;flex-direction:column} .input label{font-size:13px;color:var(--muted);margin-bottom:4px} .input input,.input select{padding:10px;border:1px solid var(--br);border-radius:10px;background:var(--surface);color:var(--text)} .input input::placeholder{color:#839} .actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px} .kpis{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:10px} .kpi{background:#0f1842;border:1px solid var(--br);border-radius:10px;padding:10px} .kpi .v{font-size:18px;font-weight:800} .table{width:100%;border-collapse:collapse;margin-top:10px} .table th,.table td{border:1px solid var(--br);padding:8px;text-align:right} .table th{background:#0e1b47;text-align:left} .align-left{text-align:left} </style> </head> <body> <header> <div class="header-inner"> <div class="brand"> <div class="logo">F</div> <div> <div style="font-weight:800">FinanceTools Pro</div> <div style="font-size:12px;color:#aab1c7">Smart Calculators & GST Billing</div> </div> </div> <nav class="nav"> <a href="#home">Home</a> <a href="#sip">SIP</a> <a href="#emi">EMI</a> <a href="#gstcalc">GST Calc</a> <a href="#bill">GST Bill</a> </nav> <button class="theme" id="themeBtn">Theme</button> </div> </header> <main id="app"></main> <footer> <div class="footer-inner"> <div>¬© 2025 FinanceTools Pro ‚Äî Fast, clean and accurate utilities for everyday finance.</div> <div class="badge">PWA ready - Works offline after first load</div> </div> </footer> <script> /* =================== SPA Pages =================== */ const pages = { home: ` <section class="hero"> <h1>‡§π‡§∞ ‡§∞‡•ã‡§ú‡§º ‡§ï‡•á ‡§ï‡§æ‡§Æ, ‡§Ö‡§¨ ‡§è‡§ï ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§Æ‡•á‡§Ç</h1> <p>FinanceTools Pro ‡§ï‡•á ‡§∏‡§æ‡§• SIP ‡§®‡§ø‡§µ‡•á‡§∂ ‡§ï‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ ‡§¨‡§®‡§æ‡§è‡§Ç, ‡§≤‡•ã‡§® ‡§ï‡•Ä EMI ‡§∏‡§Æ‡§ù‡•á‡§Ç, GST ‡§¨‡•ç‡§∞‡•á‡§ï‡§Ö‡§™ ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§®‡§ø‡§ï‡§æ‡§≤‡•á‡§Ç ‡§î‡§∞ ‡§Æ‡§ø‡§®‡§ü‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§™‡•ç‡§∞‡•ã‡§´‡•á‡§∂‡§®‡§≤ GST ‡§á‡§®‡§µ‡•â‡§á‡§∏ ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§ï‡§∞‡•á‡§Ç‚Äî‡§∏‡§¨ ‡§ï‡•Å‡§õ ‡§§‡•á‡§ú‡§º, ‡§∏‡§æ‡§´ UI ‡§î‡§∞ ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤-‡§´‡•ç‡§∞‡•á‡§Ç‡§°‡§≤‡•Ä ‡§Ö‡§®‡•Å‡§≠‡§µ ‡§ï‡•á ‡§∏‡§æ‡§•‡•§</p> <div class="cta"> <a class="btn" href="#bill">GST Invoice ‡§¨‡§®‡§æ‡§è‡§Ç</a> <a class="btn ghost" href="#sip">SIP Calculator ‡§ñ‡•ã‡§≤‡•á‡§Ç</a> </div> </section> <section class="grid"> <div class="card small" onclick="navigate('sip')"> <h3>üìà SIP Calculator</h3> <p>‡§Æ‡•Ö‡§ö‡•ç‡§Ø‡•ã‡§∞‡§ø‡§ü‡•Ä, ‡§ó‡•á‡§®, ‡§™‡•ç‡§∞‡•ã‡§ú‡•á‡§ï‡•ç‡§∂‡§® ‡§ü‡•á‡§¨‡§≤ + ‡§ö‡§æ‡§∞‡•ç‡§ü, Excel/PDF ‡§è‡§ï‡•ç‡§∏‡§™‡•ã‡§∞‡•ç‡§ü‡•§</p> </div> <div class="card small" onclick="navigate('emi')"> <h3>üè¶ EMI Calculator</h3> <p>Reducing balance ‡§∂‡•á‡§°‡•ç‡§Ø‡•Ç‡§≤, ‡§ö‡§æ‡§∞‡•ç‡§ü, Excel/PDF ‡§è‡§ï‡•ç‡§∏‡§™‡•ã‡§∞‡•ç‡§ü‡•§</p> </div> <div class="card small" onclick="navigate('gstcalc')"> <h3>üí° GST Calculator</h3> <p>Inclusive ‚Üî Exclusive, CGST/SGST ‡§¨‡•ç‡§∞‡•á‡§ï‡§Ö‡§™ + ‡§°‡•ã‡§®‡§ü ‡§ö‡§æ‡§∞‡•ç‡§ü‡•§</p> </div> <div class="card" onclick="navigate('bill')"> <h3>üßæ GST Bill Generator</h3> <p>‡§ï‡§Ç‡§™‡§®‡•Ä/‡§ï‡•ç‡§≤‡§æ‡§á‡§Ç‡§ü ‡§°‡§ø‡§ü‡•á‡§≤‡•ç‡§∏, ‡§≤‡•ã‡§ó‡•ã, ‡§Æ‡§≤‡•ç‡§ü‡•Ä-‡§Ü‡§á‡§ü‡§Æ, 5 ‡§ü‡•á‡§Æ‡•ç‡§™‡§≤‡•á‡§ü‡•ç‡§∏, ‡§™‡•á‡§ú ‡§®‡§Ç‡§¨‡§∞ ‡§∏‡§π‡§ø‡§§ PDF/Excel‚Äî‡§¨‡§ø‡§≤‡•ç‡§ï‡•Å‡§≤ ‡§™‡•ç‡§∞‡•ã‡§´‡•á‡§∂‡§®‡§≤‡•§</p> <div class="notice">Tip: Company ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§è‡§ï ‡§¨‡§æ‡§∞ ‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç‚Äî‡§Ö‡§ó‡§≤‡•Ä ‡§¨‡§æ‡§∞ ‡§ë‡§ü‡•ã-‡§´‡§ø‡§≤‡•§</div> </div> </section> `, sip: ` <div class="tool-header"> <button class="back" onclick="navigate('home')">‚Üê Back</button> <div class="badge">SIP - Monthly compounding</div> </div> <section class="card"> <h3>SIP Calculator</h3> <div class="inputs"> <div class="input"><label>Monthly SIP (‚Çπ)</label><input id="sipP" type="number" value="5000"></div> <div class="input"><label>Annual Return (%)</label><input id="sipR" type="number" value="12" step="0.1"></div> <div class="input"><label>Years</label><input id="sipY" type="number" value="10"></div> <div class="input"><label>Goal (‚Çπ) ‚Üí Required SIP</label><input id="sipGoal" type="number" value="2000000"></div> </div> <div class="actions"> <button class="btn" onclick="calcSIP()">Calculate</button> <button class="btn ghost" onclick="exportSIP('xlsx')">Export Excel</button> <button class="btn ghost" onclick="exportSIP('pdf')">Export PDF</button> </div> <div class="kpis"> <div class="kpi"><div class="badge">Maturity</div><div id="sipMat" class="v">‚Äî</div></div> <div class="kpi"><div class="badge">Invested</div><div id="sipInv" class="v">‚Äî</div></div> <div class="kpi"><div class="badge">Gains</div><div id="sipGain" class="v">‚Äî</div></div> </div> <div class="card-section"> <canvas id="sipChart" height="120"></canvas> <table id="sipTable" class="table" style="display:none"> <thead><tr><th>Year</th><th>Invested</th><th>Value</th><th>Gain</th></tr></thead> <tbody></tbody> </table> </div> </section> `, emi: ` <div class="tool-header"> <button class="back" onclick="navigate('home')">‚Üê Back</button> <div class="badge">EMI - Reducing balance</div> </div> <section class="card"> <h3>EMI Calculator</h3> <div class="inputs"> <div class="input"><label>Loan Amount (‚Çπ)</label><input id="emiP" type="number" value="1000000"></div> <div class="input"><label>Annual Rate (%)</label><input id="emiR" type="number" value="9" step="0.05"></div> <div class="input"><label>Tenure (months)</label><input id="emiN" type="number" value="240"></div> <div class="input"><label>One-time Prepay (‚Çπ)</label><input id="emiPre" type="number" value="0"></div> </div> <div class="actions"> <button class="btn" onclick="calcEMI()">Calculate</button> <button class="btn ghost" onclick="exportEMI('xlsx')">Export Excel</button> <button class="btn ghost" onclick="exportEMI('pdf')">Export PDF</button> </div> <div class="kpis"> <div class="kpi"><div class="badge">EMI</div><div id="emiOut" class="v">‚Äî</div></div> <div class="kpi"><div class="badge">Total Interest</div><div id="emiInt" class="v">‚Äî</div></div> <div class="kpi"><div class="badge">Total Payment</div><div id="emiTot" class="v">‚Äî</div></div> </div> <div class="card-section"> <canvas id="emiChart" height="120"></canvas> <table id="emiTable" class="table" style="display:none"> <thead><tr><th>Month</th><th>EMI</th><th>Interest</th><th>Principal</th><th>Balance</th></tr></thead> <tbody></tbody> </table> </div> </section> `, gstcalc: ` <div class="tool-header"> <button class="back" onclick="navigate('home')">‚Üê Back</button> <div class="badge">GST - Inclusive ‚Üî Exclusive</div> </div> <section class="card"> <h3>GST Calculator</h3> <div class="inputs"> <div class="input"><label>Amount (‚Çπ)</label><input id="gstAmt" type="number" value="1180"></div> <div class="input"><label>GST Rate (%)</label><input id="gstRate" type="number" value="18" step="0.1"></div> <div class="input"><label>Mode</label> <select id="gstMode"><option value="add">Exclusive ‚Üí Add</option><option value="remove" selected>Inclusive ‚Üí Remove</option></select> </div> </div> <div class="actions"> <button class="btn" onclick="calcGST()">Calculate</button> <button class="btn ghost" onclick="exportGST('xlsx')">Export Excel</button> <button class="btn ghost" onclick="exportGST('pdf')">Export PDF</button> </div> <div id="gstResult" class="card-section notice">‡§Æ‡§æ‡§® ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ Calculate ‡§ï‡§∞‡•á‡§Ç‡•§</div> <canvas id="gstChart" height="100" class="card-section"></canvas> </section> `, bill: ` <div class="tool-header"> <button class="back" onclick="navigate('home')">‚Üê Back</button> <div class="badge">GST Invoice - 5 Templates - PDF/Excel</div> </div> <section class="card"> <h3>Company</h3> <div class="inputs"> <div class="input"><label>Name</label><input id="compName" placeholder="Your Company Pvt. Ltd."></div> <div class="input"><label>GSTIN</label><input id="compGST" placeholder="22ABCDE1234F1Z5"></div> <div class="input"><label>Address</label><input id="compAddr" placeholder="Street, City, State, PIN"></div> <div class="input"><label>Logo</label><input id="compLogo" type="file" accept="image/*"></div> </div> </section> <section class="card"> <h3>Client</h3> <div class="inputs"> <div class="input"><label>Name</label><input id="clientName" placeholder="Client Name"></div> <div class="input"><label>GSTIN</label><input id="clientGST" placeholder="22ABCDE1234F1Z5"></div> <div class="input"><label>Address</label><input id="clientAddr" placeholder="Street, City, State, PIN"></div> <div class="input"><label>Template</label> <select id="billTemplate"> <option value="classic">Classic</option> <option value="modern">Modern</option> <option value="minimal">Minimal</option> <option value="bold">Bold</option> <option value="elegant">Elegant</option> </select> </div> </div> </section> <section class="card"> <h3>Items</h3> <table id="billItems" class="table"> <thead><tr><th class="align-left">Item</th><th>Qty</th><th>Rate</th><th>GST %</th><th>Amount</th><th>Action</th></tr></thead> <tbody></tbody> </table> <div class="actions"><button class="btn" onclick="addBillItem()">+ Add Item</button></div> <div class="kpis"> <div class="kpi"><div class="badge">Subtotal</div><div id="billSub" class="v">‚Çπ 0.00</div></div> <div class="kpi"><div class="badge">Tax (CGST+SGST)</div><div id="billTax" class="v">‚Çπ 0.00</div></div> <div class="kpi"><div class="badge">Grand Total</div><div id="billGrand" class="v">‚Çπ 0.00</div></div> </div> <div class="actions"> <button class="btn ghost" onclick="exportBill('xlsx')">Export Excel</button> <button class="btn" onclick="exportBill('pdf')">Export PDF</button> </div> <div id="billPreview" class="card-section notice">‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§∏‡•á‡§≤ (Item/Qty/Rate/GST%) ‡§ï‡•ã ‡§¨‡§¶‡§≤‡§§‡•á ‡§π‡•Ä ‡§ü‡•ã‡§ü‡§≤ ‡§ë‡§ü‡•ã-‡§Ö‡§™‡§°‡•á‡§ü ‡§π‡•ã‡§ó‡§æ‡•§</div> </section> ` }; /* =============== Router & Theme =============== */ function navigate(p){location.hash=p;} function render(){ const r=location.hash.replace('#','')||'home'; document.getElementById('app').innerHTML = pages[r] || pages.home; if(r==='sip') initSIP(); if(r==='emi') initEMI(); if(r==='gstcalc') initGST(); if(r==='bill') initBill(); } window.addEventListener('hashchange', render); document.getElementById('themeBtn').onclick=()=>{document.body.dataset.theme=document.body.dataset.theme==='dark'?'light':'dark';}; /* =============== Common Utils =============== */ const INR = n => '‚Çπ '+Number(n||0).toFixed(2); const stamp = ()=> new Date().toISOString().replace(/[:T]/g,'_').slice(0,16); function fitCols(ws, aoa){ ws['!cols']=aoa.map((_,i)=>({wch:Math.max(...aoa.map(r=>String(r[i]??'').length))+2})); } function pdfHeaderFooter(doc, title){ // Header doc.setFontSize(14); doc.text(title,14,14); // Footer placeholder; finalize after content } function pdfFinalize(doc){ const pages = doc.internal.getNumberOfPages(); for(let i=1;i<=pages;i++){ doc.setPage(i); const W = doc.internal.pageSize.getWidth(), H = doc.internal.pageSize.getHeight(); doc.setFontSize(10); doc.text(new Date().toLocaleString(), 14, H-8); doc.text(`Page ${i} of ${pages}`, W-40, H-8); } } /* =============== SIP =============== */ let sipChart; function initSIP(){ ['sipP','sipR','sipY','sipGoal'].forEach(id=>document.getElementById(id).addEventListener('input', calcSIP)); calcSIP(); } function calcSIP(){ const P=+sipP.value||0, r=(+sipR.value||0)/100/12, y=+sipY.value||0, n=y*12; if(P<=0||r<0||y<=0) return; const M = P*((Math.pow(1+r,n)-1)/r)*(1+r), invested=P*n, gain=M-invested; sipMat.textContent=INR(M); sipInv.textContent=INR(invested); sipGain.textContent=INR(gain); const labels=[], inv=[], val=[], rows=[["Year","Invested","Value","Gain"]]; for(let yr=1;yr<=y;yr++){ const m=yr*12, v= P*((Math.pow(1+r,m)-1)/r)*(1+r); labels.push('Y'+yr); inv.push(P*m); val.push(v); rows.push([yr, (P*m).toFixed(2), v.toFixed(2), (v-P*m).toFixed(2)]); } const tb=document.querySelector('#sipTable tbody'); tb.innerHTML=rows.slice(1).map(r=>`<tr><td class="align-left">${r}</td><td>${r[1]}</td><td>${r[2]}</td><td>${r}</td></tr>`).join(''); document.getElementById('sipTable').style.display='table'; const ctx=document.getElementById('sipChart'); if(sipChart) sipChart.destroy(); sipChart=new Chart(ctx,{type:'line',data:{labels,datasets:[ {label:'Invested',data:inv,borderColor:'#f59e0b',tension:.2}, {label:'Value',data:val,borderColor:'#4fb4ff',tension:.2} ]},options:{plugins:{legend:{position:'bottom'}},scales:{y:{beginAtZero:true}}}}); } function exportSIP(kind){ const rows=[["Year","Invested","Value","Gain"]]; document.querySelectorAll('#sipTable tbody tr').forEach(tr=>{ rows.push(Array.from(tr.children).map(td=>td.textContent)); }); if(kind==='xlsx'){ const wb=XLSX.utils.book_new(), ws=XLSX.utils.aoa_to_sheet(rows); fitCols(ws,rows); XLSX.utils.book_append_sheet(wb,ws,'SIP'); XLSX.writeFile(wb,`SIP_${stamp()}.xlsx`); }else{ const {jsPDF}=window.jspdf; const doc=new jsPDF(); pdfHeaderFooter(doc,'SIP Report'); doc.autoTable({head:[rows],body:rows.slice(1),startY:20}); pdfFinalize(doc); doc.save(`SIP_${stamp()}.pdf`); } } /* =============== EMI =============== */ let emiChart; function initEMI(){ ['emiP','emiR','emiN','emiPre'].forEach(id=>document.getElementById(id).addEventListener('input', calcEMI)); calcEMI(); } function calcEMI(){ let P=+emiP.value||0, r=(+emiR.value||0)/100/12, n=+emiN.value||0, pre=+emiPre.value||0; let bal=Math.max(P-pre,0); if(P<=0||r<0||n<=0) return; const f=Math.pow(1+r,n); const emi = bal>0 ? bal*r*f/(f-1) : 0; const rows=[["Month","EMI","Interest","Principal","Balance"]]; const labels=[], interest=[], principal=[]; let totalI=0; for(let m=1;m<=n && bal>0;m++){ const i = bal*r; const p=Math.min(emi-i, bal); bal=(bal-p); totalI += i; labels.push(m); interest.push(i); principal.push(p); if(m<=360) rows.push([m.toString(), emi.toFixed(2), i.toFixed(2), p.toFixed(2), bal.toFixed(2)]); } emiOut.textContent=INR(emi); emiInt.textContent=INR(totalI); emiTot.textContent=INR((P-pre)+totalI); const tb=document.querySelector('#emiTable tbody'); tb.innerHTML=rows.slice(1).map(r=>`<tr><td>${r}</td><td>${r[1]}</td><td>${r[2]}</td><td>${r}</td><td>${r}</td></tr>`).join(''); document.getElementById('emiTable').style.display='table'; const ctx=document.getElementById('emiChart'); if(emiChart) emiChart.destroy(); emiChart=new Chart(ctx,{type:'bar',data:{labels,datasets:[ {label:'Interest',data:interest,backgroundColor:'rgba(239,68,68,.6)'}, {label:'Principal',data:principal,backgroundColor:'rgba(34,197,94,.6)'} ]},options:{plugins:{legend:{position:'bottom'}},scales:{y:{beginAtZero:true}}}}); } function exportEMI(kind){ const rows=[["Month","EMI","Interest","Principal","Balance"]]; document.querySelectorAll('#emiTable tbody tr').forEach(tr=>{ rows.push(Array.from(tr.children).map(td=>td.textContent)); }); if(kind==='xlsx'){ const wb=XLSX.utils.book_new(), ws=XLSX.utils.aoa_to_sheet(rows); fitCols(ws,rows); XLSX.utils.book_append_sheet(wb,ws,'EMI'); XLSX.writeFile(wb,`EMI_${stamp()}.xlsx`); }else{ const {jsPDF}=window.jspdf; const doc=new jsPDF(); pdfHeaderFooter(doc,'EMI Schedule'); doc.autoTable({head:[rows],body:rows.slice(1),startY:20}); pdfFinalize(doc); doc.save(`EMI_${stamp()}.pdf`); } } /* =============== GST Calculator =============== */ let gstChart; function initGST(){ ['gstAmt','gstRate','gstMode'].forEach(id=>document.getElementById(id).addEventListener('input', calcGST)); calcGST(); } function calcGST(){ const amt=+gstAmt.value||0, rate=(+gstRate.value||0)/100, mode=gstMode.value; let base,gst,total; if(mode==='add'){ base=amt; gst=base*rate; total=base+gst; } else{ base=amt/(1+rate); gst=amt-base; total=amt; } const text = `Base: ${INR(base)} | GST: ${INR(gst)} | Total: ${INR(total)} | CGST: ${INR(gst/2)} | SGST: ${INR(gst/2)}`; document.getElementById('gstResult').textContent = text; const ctx=document.getElementById('gstChart'); if(gstChart) gstChart.destroy(); gstChart=new Chart(ctx,{type:'doughnut',data:{labels:['Base','GST'],datasets:[{data:[base,gst],backgroundColor:['#22c55e','#f59e0b']}]},options:{plugins:{legend:{position:'bottom'}}}}); } function exportGST(kind){ const parts=document.getElementById('gstResult').textContent.split('|').map(s=>[s.trim()]); if(kind==='xlsx'){ const wb=XLSX.utils.book_new(), ws=XLSX.utils.aoa_to_sheet(parts); fitCols(ws,parts); XLSX.utils.book_append_sheet(wb,ws,'GST'); XLSX.writeFile(wb,`GST_${stamp()}.xlsx`); }else{ const {jsPDF}=window.jspdf; const doc=new jsPDF(); pdfHeaderFooter(doc,'GST Calculation'); doc.autoTable({body:parts,startY:20}); pdfFinalize(doc); doc.save(`GST_${stamp()}.pdf`); } } /* =============== GST BILL =============== */ let billItems=[], companyLogo=""; function initBill(){ // load company from storage try{ const saved=JSON.parse(localStorage.getItem('company')||'{}'); if(saved){ compName.value=saved.name||''; compGST.value=saved.gst||''; compAddr.value=saved.addr||''; companyLogo=saved.logo||''; } }catch(e){} compLogo.onchange=(e)=>{ const f=e.target.files?.; if(!f) return; const fr=new FileReader(); fr.onload=()=>{ companyLogo=fr.result; saveCompany(); }; fr.readAsDataURL(f); }; ['compName','compGST','compAddr'].forEach(id=>document.getElementById(id).addEventListener('input', saveCompany)); billItems=[]; addBillItem(); // default row // reactive updates for table: delegate input event document.getElementById('app').addEventListener('input', (e)=>{ const row = e.target.closest('tr'); if(!row || !row.parentElement || row.parentElement.parentElement.id!=='billItems') return; const idx = Array.from(row.parentElement.children).indexOf(row); const cells = row.querySelectorAll('td'); const name = cells.querySelector('input').value; const qty = +cells[1].querySelector('input').value || 0; const rate = +cells[2].querySelector('input').value || 0; const gst = +cells.querySelector('input').value || 0; billItems[idx] = {name, qty, rate, gst}; updateBillLine(idx); recalcBillTotals(); }); } function saveCompany(){ localStorage.setItem('company', JSON.stringify({name:compName.value, gst:compGST.value, addr:compAddr.value, logo:companyLogo})); } function addBillItem(name="", qty=1, rate=0, gst=18){ billItems.push({name, qty, rate, gst}); const tb=document.querySelector('#billItems tbody'); const i=billItems.length-1; const tr=document.createElement('tr'); tr.innerHTML=` <td class="align-left"><input placeholder="Item name" value="${name}"></td> <td><input type="number" min="0" step="1" value="${qty||''}" placeholder="0"></td> <td><input type="number" min="0" step="0.01" value="${rate||''}" placeholder="0.00"></td> <td><input type="number" min="0" step="0.1" value="${gst||''}" placeholder="0"></td> <td id="amount-${i}">‚Çπ 0.00</td> <td><button class="back" onclick="removeBillItem(${i})">Delete</button></td> `; tb.appendChild(tr); updateBillLine(i); recalcBillTotals(); } function removeBillItem(i){ billItems.splice(i,1); // rebuild table to keep indices in sync const tb=document.querySelector('#billItems tbody'); tb.innerHTML=''; billItems.forEach((it)=> addBillItem(it.name, it.qty, it.rate, it.gst)); recalcBillTotals(); } function updateBillLine(i){ const it=billItems[i]||{qty:0,rate:0,gst:0}; const line = (it.qty||0)*(it.rate||0); const tax = line*((it.gst||0)/100); const cell=document.getElementById(`amount-${i}`); if(cell) cell.textContent = INR(line+tax); } function recalcBillTotals(){ let sub=0, tax=0; billItems.forEach(it=>{ const line=(it.qty||0)*(it.rate||0); sub += line; tax += line*((it.gst||0)/100); }); billSub.textContent=INR(sub); billTax.textContent=INR(tax); billGrand.textContent=INR(sub+tax); billPreview.textContent=`Subtotal: ${INR(sub)} | Tax: ${INR(tax)} | Grand: ${INR(sub+tax)}`; } function tplStyles(name){ switch(name){ case 'modern': return { headStyles:{fillColor:,textColor:255}, bodyStyles:{textColor:40}, alternateRowStyles:{fillColor:} }; case 'minimal':return { headStyles:{fillColor:,textColor:0,lineWidth:0.1}, bodyStyles:{textColor:0}, alternateRowStyles:{fillColor:false} }; case 'bold': return { headStyles:{fillColor:,textColor:255,fontStyle:'bold'}, bodyStyles:{textColor:20}, alternateRowStyles:{fillColor:} }; case 'elegant':return { headStyles:{fillColor:,textColor:}, bodyStyles:{textColor:}, alternateRowStyles:{fillColor:} }; default: return { headStyles:{fillColor:,textColor:0}, bodyStyles:{textColor:0}, alternateRowStyles:{fillColor:} }; } } function exportBill(kind){ recalcBillTotals(); const rows = billItems.map(it=>{ const line=(it.qty||0)*(it.rate||0), tax=line*((it.gst||0)/100); return [it.name||'-', it.qty||0, (it.rate||0).toFixed(2), (it.gst||0).toFixed(1), line.toFixed(2), tax.toFixed(2), (line+tax).toFixed(2)]; }); const sub = billItems.reduce((a,i)=>a+(i.qty||0)*(i.rate||0),0); const tax = billItems.reduce((a,i)=>a+((i.qty||0)*(i.rate||0)*(i.gst||0)/100),0); const grand = sub+tax; if(kind==='xlsx'){ const data=[["Item","Qty","Rate","GST %","Amount","Tax","Total"], ...rows, ["","","","","","Grand Total", grand.toFixed(2)]]; const wb=XLSX.utils.book_new(), ws=XLSX.utils.aoa_to_sheet(data); fitCols(ws,data); XLSX.utils.book_append_sheet(wb,ws,'Invoice'); XLSX.writeFile(wb,`Invoice_${stamp()}.xlsx`); } else { const {jsPDF}=window.jspdf; const doc=new jsPDF(); // Header with logo if(companyLogo){ try{doc.addImage(companyLogo,'PNG', 170, 6, 26, 12);}catch(e){} } doc.setFontSize(16); doc.text((compName.value||'Invoice'),14,12); doc.setFontSize(10); doc.text((compAddr.value||''),14,18); doc.text('GSTIN: '+(compGST.value||'-'),14,23); // Client block doc.setFontSize(12); doc.text('Bill To:',14,32); doc.setFontSize(10); doc.text((clientName.value||'-'),14,38); doc.text((clientAddr.value||'-'),14,43); doc.text('GSTIN: '+(clientGST.value||'-'),14,48); // Table with template style const style = tplStyles(document.getElementById('billTemplate').value); doc.autoTable({ startY:54, head:[["Item","Qty","Rate","GST %","Amount","Tax","Total"]], body: rows, headStyles: style.headStyles, bodyStyles: style.bodyStyles, alternateRowStyles: style.alternateRowStyles, styles:{halign:'right'}, columnStyles:{0:{halign:'left'}} }); const y = doc.lastAutoTable.finalY + 6; doc.setFontSize(12); doc.text(`Subtotal: ${INR(sub)}`,14,y); doc.text(`Tax: ${INR(tax)}`,14,y+6); doc.setFontSize(13); doc.text(`Grand Total: ${INR(grand)}`,14,y+12); pdfFinalize(doc); doc.save(`Invoice_${stamp()}.pdf`); } } /* ======= Minimal offline cache (optional) ======= */ if('serviceWorker' in navigator){ const sw=` self.addEventListener('install',e=>{e.waitUntil(caches.open('v1').then(c=>c.addAll(['./'])));}); self.addEventListener('fetch',e=>{e.respondWith(caches.match(e.request).then(r=>r||fetch(e.request)));}); `; navigator.serviceWorker.register(URL.createObjectURL(new Blob([sw],{type:'text/javascript'}))); } /* Start */ render(); </script> </body> </html>
