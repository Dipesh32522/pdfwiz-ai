<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>All-in-One Online Tools</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans">

<header class="bg-green-500 text-white p-6 text-center">
  <h1 class="text-3xl font-bold">All-in-One Online Tools</h1>
  <p class="mt-2">Loan Calculator | Rent vs Buy Calculator</p>
</header>

<nav class="flex justify-center gap-4 mt-4">
  <button class="px-4 py-2 bg-green-500 text-white rounded" onclick="showSection('loan')">Loan Calculator</button>
  <button class="px-4 py-2 bg-green-500 text-white rounded" onclick="showSection('rent')">Rent vs Buy Calculator</button>
</nav>

<!-- Loan Calculator -->
<section id="loan" class="bg-white max-w-3xl mx-auto mt-6 p-6 rounded shadow">
  <h2 class="text-2xl font-bold mb-4">Loan / EMI Calculator</h2>
  <div class="grid gap-4">
    <input type="number" id="loanAmount" placeholder="Loan Amount" class="p-2 border rounded">
    <input type="number" id="loanRate" placeholder="Interest Rate (%)" class="p-2 border rounded">
    <input type="number" id="loanYears" placeholder="Tenure (Years)" class="p-2 border rounded">
    <button class="px-4 py-2 bg-green-500 text-white rounded" onclick="calculateEMI()">Calculate EMI</button>
    <div id="emiResult" class="font-bold mt-2"></div>
    <canvas id="emiChart" class="mt-4"></canvas>
  </div>
</section>

<!-- Rent vs Buy Calculator -->
<section id="rent" class="hidden bg-white max-w-3xl mx-auto mt-6 p-6 rounded shadow">
  <h2 class="text-2xl font-bold mb-4">Rent vs Buy Calculator</h2>
  <div class="grid gap-4">
    <input type="number" id="rentAmount" placeholder="Monthly Rent" class="p-2 border rounded">
    <input type="number" id="homePrice" placeholder="Home Price" class="p-2 border rounded">
    <input type="number" id="mortgageRate" placeholder="Interest Rate (%)" class="p-2 border rounded">
    <input type="number" id="mortgageYears" placeholder="Loan Term (Years)" class="p-2 border rounded">
    <button class="px-4 py-2 bg-green-500 text-white rounded" onclick="calculateRentVsBuy()">Calculate</button>
    <div id="rentResult" class="font-bold mt-2 whitespace-pre-line"></div>
  </div>
</section>

<script>
// Section switch functionality
function showSection(id){
  document.querySelectorAll('section').forEach(s=>s.classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
}
showSection('loan');

// ------------------- Loan Calculator -------------------
let emiChart = null;
function calculateEMI(){
  const P = parseFloat(document.getElementById('loanAmount').value);
  const r = parseFloat(document.getElementById('loanRate').value)/12/100;
  const n = parseFloat(document.getElementById('loanYears').value)*12;

  const EMI = (P*r*Math.pow(1+r,n))/(Math.pow(1+r,n)-1);

  if(!isNaN(EMI) && isFinite(EMI)){
    document.getElementById('emiResult').innerText = 'Monthly EMI: ₹'+EMI.toFixed(2);
    const ctxChart = document.getElementById('emiChart').getContext('2d');
    if(emiChart) emiChart.destroy();
    emiChart = new Chart(ctxChart, {
      type: 'pie',
      data: {
        labels:['Principal','Interest'],
        datasets:[{data:[P, EMI*n - P], backgroundColor:['#4CAF50','#F87171']}]
      }
    });
  } else {
    document.getElementById('emiResult').innerText = 'Please enter valid values!';
    if(emiChart) { emiChart.destroy(); emiChart = null; }
  }
}

// ------------------- Rent vs Buy Calculator -------------------
function calculateRentVsBuy(){
  const years = parseFloat(document.getElementById('mortgageYears').value);
  const rentMonthly = parseFloat(document.getElementById('rentAmount').value);
  const price = parseFloat(document.getElementById('homePrice').value);
  const r = parseFloat(document.getElementById('mortgageRate').value)/12/100;
  const n = years*12;

  const rentAnnual = rentMonthly*12;
  const EMI = (price*r*Math.pow(1+r,n))/(Math.pow(1+r,n)-1);
  const totalBuy = EMI*n;

  if(isFinite(totalBuy)){
    const totalRent = rentAnnual*years;
    const simpleAdvice = totalBuy > totalRent
      ? 'Renting may be cheaper in this simple model'
      : 'Buying may be cheaper in this simple model';
    document.getElementById('rentResult').innerText =
      'Total Cost of Buying: ₹'+totalBuy.toFixed(2)+'\n'+
      'Total Rent Paid: ₹'+totalRent.toFixed(2)+'\n'+
      'Note: ignores taxes, insurance, maintenance, appreciation, rent growth, and opportunity cost.\n'+
      'Result: '+simpleAdvice;
  } else {
    document.getElementById('rentResult').innerText = 'Please enter valid values!';
  }
}
</script>
</body>
</html>
